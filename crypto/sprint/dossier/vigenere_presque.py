c="""
Apidqkvc la vyuxzoa

Qvo apidqkv nm jwwjnmc mob eva adipqyv ninqk wxlaa mwqzdmo lyzeosva
qxkazdievo Cjm cbwbswj lo ka oovnm éwmp oéxézwtouavd laa cceboa zm xwijbmo we
la tobpzoa owedavd onwexéo xkz ywnéa av Wwnao wq mx ihxrixmd zwlsw Hwba zmc
éueacqkvc xdwxqmcoa ymc aémcovymc akvd évkvmémo xkz zmc dkqh inbsneksmhtoa Et
ofeadm zmc apidqkvc la vyuxzoa zixa zm xwijbmqaoa hixoqmc

Kaa éwqoaswja cmnismjb nmobsvéaa à nmo imbedsbéo l'oalqyvjiqm iisa ymd coiqm
ji tiiisa épé kyvbqbué lclteyemimxb lib cj oycrmbvauovp aeaymzbejvm zm piezo
nkvmbewxvaz eva bothm cbwbswj Mx zadkvypo taa ÉdipaEvea yvp reoé av 2001 vmo
Kejwv Pqrm ev czyclm nqjlsdelea aazqkvxijb zwqz vm ywwxpm nm Ycli ab ace
zokadkqavd mp lémwzismjb nmo uoaoiqmo lsnbccéa zmzcea eva adipqyv zm xwijbmo
kejwqxm1

Hmc apidqkvc la vyuxzoa jéuobpmxb lic mj kyvpqxc Atvmo izxwzkqoaovp md
leazinisaomxb wc pqh le bauza ocb ledozomc nnéyemjkoa cévébihmwmjb nc oxokpzo
PB ukqo kozpisvaa ccedovp koxavnijb ev lzyoniwua zéqchqoz Hmez wkdqrqdé i
wcquavdé à xwzdqn lo 1960 irixb zm mpqboz à hi ccebo la témtwbouavd la tEvewx
akdsébeyem

Jebo

Aotkv Dpa Kyvab Zzkrokp toa obkbewxa zm xwijbmo mhqobovp loxqqc tw Xbmiqèbm
Ccoznm wwjlsihm Cq ymdba ipnezwipqyv aad mtimba toa obkbewxa zm xwijbmo
kyulbovp xkziq vmo xbmiqèbmo bbijawqoaswja bizqy

Qh i édé aléketé mco kaa cbwbswja cmndovp à loa woovymc okcfmnvouavdihmc xkcb
bnixaimdbnm nmo uoaoiqmo à loa aazqkvc la nkçwj asulto mp mpnekkka Aotkv
mmpbo bdéwbqa toa imcawooa owxb ypsnbzéc irmm cj ukamco rabkjhm Eva iebnm
dpékzsm oczxkao yqm mmnbkqjmc laa cbwbswja cwjb vqéaa à nmo wzézwbswja nm
pzknek nm zzyoqm

Léjwwqjidqkvc

Taa cbwbswja nm jwwjnmc zaçwsdavd xwzpwea nmo aezjwwa lib taa zioaswjvéc aqz
vi xicm zcx étéimxb zqcbevmben cwqdovp tocn asojiv levdmndkthm Zin mhmixvm
hi cbwbswj Tsvywvvopsza Xyiypoz fwem hmc lach xnmwqènmc uaaezaa nm hi mpwvcwj
Brm Hqxkktxadqbm Lwkkdmb mj ifijb mpwyem oéyemjko la vyuxzoa Hi cbwbswj
Ukojmdqy Nsmhlc nwqd la uêwm wdok h'ivjqu Vmo Krijbc uwoxébeyemo le uqaskemx
RaixUekrmh Rkznm Kbavmqój lélcpm cmo bbijawqoaswja zin to ukb oaliqvkt 
Kbavmqój

Pwnukbo

Toa obkbewxa zm xwijbmo aeqrmxb owedavd cj nyziid aeuzta To xnétela we
tevdzklekpqyv zcxm pzkvousaoqyv evmtqb eva ayzpm nqzmxbensijb ace xocp
xbmjlbm qvo nkzwm jcwézeyem kc mwzém mwiuo Kdibtem Svzqk Wokkz kc 250
250 250 nmo xrzwaoa yibiybébqobsyqmc Ipmxkeóv 1234567890  oby
we laa cwja yc lpbiomc uqaskwtoa lib mtmwxhm Dpa Tsvywvvopsza Xyiypoz kc
Wicvobek Pqatna Hm zzéhcnm lmeb êpzo zélébé zmjlkvp cx kazdiev dmixc irixb
mco ta uoaoiqm jm néjqbo

Ta kyzla nc imcawoo mob cwqdovp xbékézé xkz hixvkvmm zm ci pisthm Vm imcawoo
mob ovocsba bbijawqo ayco tk nkzwm zm qzkczmo lo yqidza we keva kdqpnnmc wq
tobpzoa av ktlpkjab bizqy dkqh inbsneksmhtoa kc Wwnao Taa qzkczmo ayvp
bixeyemimxb néxédéa Ymbbwqxmo adipqyvo mxdkqovp xvco lev imcawoo xwz
dzwvcueacqkv

Kxnèa vmo uoaoiqmo toa obkbewxa wvxwjkovp tk nev nmo bbijawqoaswja nm zqfmnaoa
biçyvo kyuim véueacqkv nc iwd  nev yc jqwxkzdm mcothm finqkbewx lwvc tw
tkvcco cpqvqoém) yc zc qzkczm WZ ov pétéqzwxrqa Kozpisvaa cbwbswja dwqb
zinbskqtsèzauovp kothmc yqwx xavcm lzydavsz zm vijksmjvo Cjqyv owfqépqaca
kyvytemjb zin cxm oézsm zm jézka niqbbmo boziqxmjb zin lo tw ueaeyem kc
n'iqbbmo ayvo

Dwgmx

Mj dyqyq ev xqov iézsbé NBXCJWLQCIZZLQBKYKDUCQKQ
Pzycré akvo tkqzm nm zkylanb kabdm bwsayq 
"""

c = c.replace(" ","")
c = c.replace("\n","")
c = c.replace("é","")
c = c.replace("é","")


def tolet(x):
    "transforme l'entier [x] en la [x]ième lettre majuscule (modulo 26)"
    return chr(65 + x % 26)


def toint(c):
    "tranforme la lettre majuscule [c] en sa position dans l'alphabet (de 0 à 25)"
    return ord(c) - 65


def shift(c, d):
    """décale la lettre [c] de k positions dans l'alphabet (modulo 26)
     où [k] est la position de la lettre [d] dans l'alphabet"""
    return tolet(toint(c) + toint(d))

def shift_inverse(c, d):
    """décale la lettre [c] de k positions dans l'alphabet (modulo 26)
     où [k] est la position de la lettre [d] dans l'alphabet"""
    return tolet(toint(d) - toint(c))

from unicodedata import normalize


def nettoie(m):
    "nettoie la chaîne [m] en ne gardant que les lettres débarassées de leurs accents et passées en majuscules"
    return ''.join([c for c in normalize('NFKD', m).upper().strip() if ord(c) > 64 and ord(c) < 91])


m = c


def extraireSousTextes(m, k):
    lesTextes = [""] * k
    for i in range(len(m)):
        indice = i % k
        lesTextes[indice] += m[i]
    return lesTextes


def extraireSousTextes(m, k):
    lesTextes = []
    for i in range(0, k):
        # sousTxt = [];
        sousTxt = ""
        isFini = True
        j = i
        while isFini:
            # sousTxt.append(m[j])
            sousTxt += m[j]

            j += k
            if (len(m) <= j):
                isFini = False

        lesTextes.append(sousTxt)
    return lesTextes

def calculer_occurrences(texte):
    """Calcule le nombre d'occurrences de chaque caractère dans un texte."""
    freq = {}
    for x in texte:
        freq[x] = freq.get(x, 0) + 1
    return freq

def ic(texte):
    """Calcule l'indice de coïncidence d'un texte."""
    n = 0
    val_ic = 0
    freq = calculer_occurrences(texte)
    for x in freq:
        nx = freq[x]
        val_ic += nx * (nx - 1)
        n = n + nx
    val_ic = val_ic / (n * n - 1)
    return val_ic


def calcFreq(txt):
    freq = {}
    for x in txt:
        freq[x] = freq.get(x, 0) + 1
    return freq


def calculICMoyen(textes):
    resultat = 0.0
    for txt in textes:
        resultat += ic(txt);
    return resultat


for k in range(0, 26):
    print(' k : ', k, ' ', calculICMoyen(extraireSousTextes(m, k)))

# on prend 10 car on cherche l'indice de coincidence le plus proche de 0.0778
tab = extraireSousTextes(m, 4)


def trouveLeE(texte):
    tabFreq = calcFreq(texte)
    tabFreqSort = []
    for i in tabFreq:
        tabFreqSort.append((tabFreq[i], i))

    tabFreqSort.sort(reverse=True)
    return (tabFreqSort[0][1])


print(trouveLeE(tab[1]))


def calculerDecalage(texte):
    resultat = 0
    lettrePlusFreq = trouveLeE(texte)
    resultat = toint(lettrePlusFreq) - toint("E")

    return resultat


# TEST
print(calculerDecalage(tab[1]))


def calculerDecalages(textes):
    resultat = []
    for txt in textes:
        resultat.append(calculerDecalage(txt))

    return resultat


lesDecalage = calculerDecalages(tab)
print(lesDecalage)


def constructionCle(decallages):
    cle = ''
    for i in decallages:
        cle += tolet(i)
    return cle


# TEST

cle = constructionCle(lesDecalage)
print(cle)


def constructionCleDechiffrement(cle):
    resultat = ""
    for x in cle:
        resultat += tolet(26 - toint(x))
    return resultat


cleDechifre = constructionCleDechiffrement(cle)
print(cleDechifre)


def chiffrementVigenere(texteClair, cle):
    chiffre = ''

    for x in range(0, len(texteClair)):
        chiffre += shift(texteClair[x], cle[x % len(cle)])

    return chiffre


text_clair = chiffrementVigenere(m, 'KIWI')
print(text_clair)



